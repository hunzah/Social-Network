"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[4],{1004:function(t,s,e){e.r(s),e.d(s,{default:function(){return b}});var n=e(5671),i=e(3144),r=e(136),a=e(5716),o=e(2791),u=e(6708),d=e(8687),p=e(9271),l="MyPosts_postsBlock__23e4I",c="Post_item__wn7m5",h=e(2248),f=e(184),v=function(t){return(0,f.jsxs)("div",{className:c,children:[(0,f.jsx)("img",{src:t.avatar?t.avatar.toString():h}),(0,f.jsx)("div",{children:t.message}),(0,f.jsx)("span",{children:"likes: "}),t.count]})},m=e(6139),j=e(704),x=e(8610),k=e(8918),g=(0,j.Z)({form:"ProfileAddNewPostForm"})((function(t){return(0,f.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,f.jsx)(m.Z,{component:k.K,name:"newPostText",validate:[x.C1]}),(0,f.jsx)("div",{children:(0,f.jsx)("button",{type:"submit",children:"Add post"})})]})})),P=(0,d.$j)((function(t){var s,e;return{profilePage:t.profilePage,avatar:null===(s=t.profilePage.profile)||void 0===s||null===(e=s.photos)||void 0===e?void 0:e.large}}),(function(t){return{onAddPost:function(s){t((0,u.hB)(s))}}}))((function(t){var s=t.avatar,e=t.onAddPost,n=t.profilePage.postsArr.map((function(t){return(0,f.jsx)(v,{message:t.message,count:t.count,avatar:s},t.id)}));return(0,f.jsxs)("div",{className:l,children:[(0,f.jsx)("h3",{children:"My Post"}),(0,f.jsx)("div",{children:(0,f.jsx)(g,{onSubmit:function(t){e(t.newPostText)}})}),(0,f.jsx)("div",{children:n})]})})),S=e(6349),y=function(t){(0,r.Z)(e,t);var s=(0,a.Z)(e);function e(){var t;(0,n.Z)(this,e);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(t=s.call.apply(s,[this].concat(r))).state={editMode:!1,status:t.props.status},t.editMode=function(){t.setState({editMode:!0})},t.deActivateEditMode=function(){t.setState({editMode:!1}),t.props.updateStatus(t.state.status)},t.onStatusChanged=function(s){t.setState({status:s.currentTarget.value})},t}return(0,i.Z)(e,[{key:"componentDidUpdate",value:function(t,s){t.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return(0,f.jsx)("div",{children:this.props.isOwner?(0,f.jsx)("div",{children:this.state.editMode?(0,f.jsx)("input",{autoFocus:!0,onBlur:this.deActivateEditMode,value:this.state.status,onChange:this.onStatusChanged}):(0,f.jsx)("span",{onDoubleClick:this.editMode,children:this.props.status||"No status"})}):(0,f.jsx)("div",{children:(0,f.jsx)("span",{children:this.props.status||"No status"})})})}}]),e}(o.Component),w=function(t){var s,e=t.status,n=t.updateStatus,i=t.isOwner,r=t.savePhotoThunk,a=t.profile,o=null===(s=a.photos)||void 0===s?void 0:s.large,u=a.fullName,d=(a.aboutMe,a.contacts),p=d?Object.entries(d):[];return(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:S.Z.descriptionBlock,children:[(0,f.jsx)("img",{className:S.Z.profileAvatar,src:o||h,alt:"profile"}),i&&(0,f.jsx)("div",{children:(0,f.jsx)("input",{type:"file",onChange:function(t){var s;null!==(s=t.target.files)&&void 0!==s&&s.length&&r(t.target.files[0])}})}),u&&(0,f.jsx)("div",{children:u}),d&&(0,f.jsxs)("div",{children:[" My Contacts:",p.map((function(t,s){return(0,f.jsx)("div",{children:"".concat(t[0],": ").concat(t[1]?t[1]:"add your ".concat(t[0]," link in Settings")," ")},s)}))]})]}),(0,f.jsx)(y,{isOwner:i,value:"ok",status:e,updateStatus:n})]})},T=function(t){var s=t.profile,e=t.status,n=t.updateStatus,i=t.owner,r=t.savePhotoThunk;return(0,f.jsxs)("div",{children:[(0,f.jsx)(w,{isOwner:i,profile:s,status:e,updateStatus:n,savePhotoThunk:r}),(0,f.jsx)(P,{})]})},M=e(7781),C=e(2163),N=function(t){(0,r.Z)(e,t);var s=(0,a.Z)(e);function e(){return(0,n.Z)(this,e),s.apply(this,arguments)}return(0,i.Z)(e,[{key:"refreshProfile",value:function(){var t=Number(this.props.match.params.userId);t||(t=this.props.userId),this.props.setProfileThunk(t),this.props.getStatusThunk(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,s,e){t.match.params.userId!==this.props.match.params.userId&&this.refreshProfile(),console.log(this.props.profile)}},{key:"render",value:function(){return(0,f.jsx)("div",{children:this.props.profile&&(0,f.jsx)(T,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatusThunk,owner:!this.props.match.params.userId,savePhotoThunk:this.props.savePhotoThunk})})}}]),e}(o.Component),Z={setProfileThunk:u.cJ,getStatusThunk:u.xD,updateStatusThunk:u.NN,savePhotoThunk:u.m2},b=(0,M.qC)(p.EN,C.D,(0,d.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,userId:t.auth.id}}),Z))(N)}}]);
//# sourceMappingURL=4.d9cc51cc.chunk.js.map